{"version":3,"file":"headlessui.cjs.production.min.js","sources":["../src/hooks/use-iso-morphic-effect.ts","../src/components/transitions/utils/transition.ts","../src/hooks/use-id.ts","../src/hooks/use-is-initial-render.ts","../src/utils/match.ts","../src/utils/disposables.ts","../src/utils/once.ts","../src/components/transitions/transition.tsx","../src/components/keyboard.ts","../src/components/menu/menu.tsx","../src/hooks/use-is-mounted.ts","../src/utils/render.ts","../src/hooks/use-disposables.ts","../src/hooks/use-sync-refs.ts","../src/components/listbox/listbox.tsx","../src/hooks/use-computed.ts","../src/components/switch/switch.tsx"],"sourcesContent":["import * as React from 'react'\n\nexport const useIsoMorphicEffect =\n  typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect\n","import { once } from '../../../utils/once'\nimport { disposables } from '../../../utils/disposables'\n\nfunction addClasses(node: HTMLElement, ...classes: string[]) {\n  node && classes.length > 0 && node.classList.add(...classes)\n}\n\nfunction removeClasses(node: HTMLElement, ...classes: string[]) {\n  node && classes.length > 0 && node.classList.remove(...classes)\n}\n\nexport enum Reason {\n  Finished = 'finished',\n  Cancelled = 'cancelled',\n}\n\nfunction waitForTransition(node: HTMLElement, done: (reason: Reason) => void) {\n  const d = disposables()\n\n  if (!node) return d.dispose\n\n  // Safari returns a comma separated list of values, so let's sort them and take the highest value.\n  const { transitionDuration, transitionDelay } = getComputedStyle(node)\n\n  const [durationMs, delaysMs] = [transitionDuration, transitionDelay].map(value => {\n    const [resolvedValue = 0] = value\n      .split(',')\n      // Remove falseys we can't work with\n      .filter(Boolean)\n      // Values are returned as `0.3s` or `75ms`\n      .map(v => (v.includes('ms') ? parseFloat(v) : parseFloat(v) * 1000))\n      .sort((a, z) => z - a)\n\n    return resolvedValue\n  })\n\n  // Waiting for the transition to end. We could use the `transitionend` event, however when no\n  // actual transition/duration is defined then the `transitionend` event is not fired.\n  //\n  // TODO: Downside is, when you slow down transitions via devtools this timeout is still using the\n  // full 100% speed instead of the 25% or 10%.\n  if (durationMs !== 0) {\n    d.setTimeout(() => {\n      done(Reason.Finished)\n    }, durationMs + delaysMs)\n  } else {\n    // No transition is happening, so we should cleanup already. Otherwise we have to wait until we\n    // get disposed.\n    done(Reason.Finished)\n  }\n\n  // If we get disposed before the timeout runs we should cleanup anyway\n  d.add(() => done(Reason.Cancelled))\n\n  return d.dispose\n}\n\nexport function transition(\n  node: HTMLElement,\n  base: string[],\n  from: string[],\n  to: string[],\n  done?: (reason: Reason) => void\n) {\n  const d = disposables()\n  const _done = done !== undefined ? once(done) : () => {}\n\n  addClasses(node, ...base, ...from)\n\n  d.nextFrame(() => {\n    removeClasses(node, ...from)\n    addClasses(node, ...to)\n\n    d.add(\n      waitForTransition(node, reason => {\n        removeClasses(node, ...to, ...base)\n        return _done(reason)\n      })\n    )\n  })\n\n  // Once we get disposed, we should ensure that we cleanup after ourselves. In case of an unmount,\n  // the node itself will be nullified and will be a no-op. In case of a full transition the classes\n  // are already removed which is also a no-op. However if you go from enter -> leave mid-transition\n  // then we have some leftovers that should be cleaned.\n  d.add(() => removeClasses(node, ...base, ...from, ...to))\n\n  // When we get disposed early, than we should also call the done method but switch the reason.\n  d.add(() => _done(Reason.Cancelled))\n\n  return d.dispose\n}\n","import * as React from 'react'\nimport { useIsoMorphicEffect } from './use-iso-morphic-effect'\n\n// We used a \"simple\" approach first which worked for SSR and rehydration on the client. However we\n// didn't take care of the Suspense case. To fix this we used the approach the @reach-ui/auto-id\n// uses.\n//\n// Credits: https://github.com/reach/reach-ui/blob/develop/packages/auto-id/src/index.tsx\n\nlet state = { serverHandoffComplete: false }\nlet id = 0\nfunction generateId() {\n  return ++id\n}\n\nexport function useId() {\n  const [id, setId] = React.useState(state.serverHandoffComplete ? generateId : null)\n\n  useIsoMorphicEffect(() => {\n    if (id === null) setId(generateId())\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  React.useEffect(() => {\n    if (state.serverHandoffComplete === false) state.serverHandoffComplete = true\n  }, [])\n\n  return id != null ? '' + id : undefined\n}\n","import * as React from 'react'\n\nexport function useIsInitialRender() {\n  const initial = React.useRef(true)\n\n  React.useEffect(() => {\n    initial.current = false\n  }, [])\n\n  return initial.current\n}\n","export function match<TValue extends string | number = string, TReturnValue = unknown>(\n  value: TValue,\n  lookup: Record<TValue, TReturnValue | ((...args: any[]) => TReturnValue)>,\n  ...args: any[]\n): TReturnValue {\n  if (value in lookup) {\n    const returnValue = lookup[value]\n    return typeof returnValue === 'function' ? returnValue(...args) : returnValue\n  }\n\n  const error = new Error(\n    `Tried to handle \"${value}\" but there is no handler defined. Only defined handlers are: ${Object.keys(\n      lookup\n    )\n      .map(key => `\"${key}\"`)\n      .join(', ')}.`\n  )\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(error, match)\n  }\n\n  throw error\n}\n","export function disposables() {\n  const disposables: Function[] = []\n\n  const api = {\n    requestAnimationFrame(...args: Parameters<typeof requestAnimationFrame>) {\n      const raf = requestAnimationFrame(...args)\n      api.add(() => cancelAnimationFrame(raf))\n    },\n\n    nextFrame(...args: Parameters<typeof requestAnimationFrame>) {\n      api.requestAnimationFrame(() => {\n        api.requestAnimationFrame(...args)\n      })\n    },\n\n    setTimeout(...args: Parameters<typeof setTimeout>) {\n      const timer = setTimeout(...args)\n      api.add(() => clearTimeout(timer))\n    },\n\n    add(cb: () => void) {\n      disposables.push(cb)\n    },\n\n    dispose() {\n      disposables.splice(0).forEach(dispose => dispose())\n    },\n  }\n\n  return api\n}\n","export function once<T>(cb: (...args: T[]) => void) {\n  const state = { called: false }\n\n  return (...args: T[]) => {\n    if (state.called) {\n      return\n    }\n    state.called = true\n    return cb(...args)\n  }\n}\n","import * as React from 'react'\n\nimport { useId } from '../../hooks/use-id'\nimport { useIsInitialRender } from '../../hooks/use-is-initial-render'\nimport { useIsMounted } from '../../hooks/use-is-mounted'\nimport { useIsoMorphicEffect } from '../../hooks/use-iso-morphic-effect'\n\nimport { match } from '../../utils/match'\nimport { Reason, transition } from './utils/transition'\n\ntype ID = ReturnType<typeof useId>\n\nfunction useSplitClasses(classes: string = '') {\n  return React.useMemo(() => classes.split(' ').filter(className => className.trim().length > 1), [\n    classes,\n  ])\n}\n\ntype TransitionContextValues = {\n  show: boolean\n  appear: boolean\n} | null\nconst TransitionContext = React.createContext<TransitionContextValues>(null)\n\nenum TreeStates {\n  Visible = 'visible',\n  Hidden = 'hidden',\n}\n\nexport type TransitionClasses = Partial<{\n  enter: string\n  enterFrom: string\n  enterTo: string\n  leave: string\n  leaveFrom: string\n  leaveTo: string\n}>\n\ntype HTMLTags = keyof JSX.IntrinsicElements\ntype HTMLTagProps<TTag extends HTMLTags> = JSX.IntrinsicElements[TTag]\n\ntype AsShortcut<TTag extends HTMLTags> = {\n  children?: React.ReactNode\n  as?: TTag\n} & Omit<HTMLTagProps<TTag>, 'ref'>\n\ntype AsRenderPropFunction = {\n  children: (ref: React.MutableRefObject<any>) => JSX.Element\n}\n\ntype BaseConfig = Partial<{ appear: boolean }>\n\ntype TransitionChildProps<TTag extends HTMLTags> = BaseConfig &\n  (AsShortcut<TTag> | AsRenderPropFunction) &\n  TransitionClasses\n\nfunction useTransitionContext() {\n  const context = React.useContext(TransitionContext)\n\n  if (context === null) {\n    throw new Error('A <Transition.Child /> is used but it is missing a parent <Transition />.')\n  }\n\n  return context\n}\n\nfunction useParentNesting() {\n  const context = React.useContext(NestingContext)\n\n  if (context === null) {\n    throw new Error('A <Transition.Child /> is used but it is missing a parent <Transition />.')\n  }\n\n  return context\n}\n\ntype NestingContextValues = {\n  children: React.MutableRefObject<ID[]>\n  register: (id: ID) => () => void\n  unregister: (id: ID) => void\n}\n\nconst NestingContext = React.createContext<NestingContextValues | null>(null)\n\nfunction useNesting(done?: () => void) {\n  const doneRef = React.useRef(done)\n  const transitionableChildren = React.useRef<ID[]>([])\n  const mounted = useIsMounted()\n\n  React.useEffect(() => {\n    doneRef.current = done\n  }, [done])\n\n  const unregister = React.useCallback(\n    (childId: ID) => {\n      const idx = transitionableChildren.current.indexOf(childId)\n\n      if (idx === -1) return\n\n      transitionableChildren.current.splice(idx, 1)\n\n      if (transitionableChildren.current.length <= 0 && mounted.current) {\n        doneRef.current?.()\n      }\n    },\n    [doneRef, mounted, transitionableChildren]\n  )\n\n  const register = React.useCallback(\n    (childId: ID) => {\n      transitionableChildren.current.push(childId)\n      return () => unregister(childId)\n    },\n    [transitionableChildren, unregister]\n  )\n\n  return React.useMemo(\n    () => ({\n      children: transitionableChildren,\n      register,\n      unregister,\n    }),\n    [register, unregister, transitionableChildren]\n  )\n}\n\nfunction TransitionChild<TTag extends HTMLTags = 'div'>(props: TransitionChildProps<TTag>) {\n  const { children, enter, enterFrom, enterTo, leave, leaveFrom, leaveTo, ...rest } = props\n  const container = React.useRef<HTMLElement | null>(null)\n  const [state, setState] = React.useState(TreeStates.Visible)\n\n  const { show, appear } = useTransitionContext()\n  const { register, unregister } = useParentNesting()\n\n  const initial = useIsInitialRender()\n  const id = useId()\n\n  const isTransitioning = React.useRef(false)\n\n  const nesting = useNesting(() => {\n    // When all children have been unmounted we can only hide ourselves if and only if we are not\n    // transitioning ourserlves. Otherwise we would unmount before the transitions are finished.\n    if (!isTransitioning.current) {\n      setState(TreeStates.Hidden)\n      unregister(id)\n    }\n  })\n\n  useIsoMorphicEffect(() => {\n    if (!id) return\n    return register(id)\n  }, [register, id])\n\n  const enterClasses = useSplitClasses(enter)\n  const enterFromClasses = useSplitClasses(enterFrom)\n  const enterToClasses = useSplitClasses(enterTo)\n\n  const leaveClasses = useSplitClasses(leave)\n  const leaveFromClasses = useSplitClasses(leaveFrom)\n  const leaveToClasses = useSplitClasses(leaveTo)\n\n  React.useEffect(() => {\n    if (state === TreeStates.Visible && container.current === null) {\n      throw new Error('Did you forget to passthrough the `ref` to the actual DOM node?')\n    }\n  }, [container, state])\n\n  // Skipping initial transition\n  const skip = initial && !appear\n\n  useIsoMorphicEffect(() => {\n    const node = container.current\n    if (!node) return\n    if (skip) return\n\n    isTransitioning.current = true\n\n    return show\n      ? transition(node, enterClasses, enterFromClasses, enterToClasses, () => {\n          isTransitioning.current = false\n        })\n      : transition(node, leaveClasses, leaveFromClasses, leaveToClasses, reason => {\n          isTransitioning.current = false\n\n          if (reason !== Reason.Finished) return\n\n          // When we don't have children anymore we can safely unregister from the parent and hide\n          // ourselves.\n          if (nesting.children.current.length <= 0) {\n            setState(TreeStates.Hidden)\n            unregister(id)\n          }\n        })\n  }, [\n    id,\n    isTransitioning,\n    unregister,\n    nesting,\n    container,\n    skip,\n    show,\n    enterClasses,\n    enterFromClasses,\n    enterToClasses,\n    leaveClasses,\n    leaveFromClasses,\n    leaveToClasses,\n  ])\n\n  // Unmount the whole tree\n  if (state === TreeStates.Hidden) return null\n\n  if (typeof children === 'function') {\n    return (\n      <NestingContext.Provider value={nesting}>\n        {(children as AsRenderPropFunction['children'])(container)}\n      </NestingContext.Provider>\n    )\n  }\n\n  const { as: Component = 'div', ...passthroughProps } = rest as AsShortcut<TTag>\n  return (\n    <NestingContext.Provider value={nesting}>\n      {/* @ts-expect-error Expression produces a union type that is too complex to represent. */}\n      <Component {...passthroughProps} ref={container}>\n        {children}\n      </Component>\n    </NestingContext.Provider>\n  )\n}\n\nexport function Transition<TTag extends HTMLTags = 'div'>(\n  props: TransitionChildProps<TTag> & { show: boolean; appear?: boolean }\n) {\n  const { show, appear = false, ...rest } = props\n\n  if (![true, false].includes(show)) {\n    throw new Error('A <Transition /> is used but it is missing a `show={true | false}` prop.')\n  }\n\n  const [state, setState] = React.useState(show ? TreeStates.Visible : TreeStates.Hidden)\n\n  const nestingBag = useNesting(() => {\n    setState(TreeStates.Hidden)\n  })\n\n  const initial = useIsInitialRender()\n  const transitionBag = React.useMemo<TransitionContextValues>(\n    () => ({ show, appear: appear || !initial }),\n    [show, appear, initial]\n  )\n\n  React.useEffect(() => {\n    if (show) {\n      setState(TreeStates.Visible)\n    } else if (nestingBag.children.current.length <= 0) {\n      setState(TreeStates.Hidden)\n    }\n  }, [show, nestingBag])\n\n  return (\n    <NestingContext.Provider value={nestingBag}>\n      <TransitionContext.Provider value={transitionBag}>\n        {match(state, {\n          [TreeStates.Visible]: () => <TransitionChild {...rest} />,\n          [TreeStates.Hidden]: null,\n        })}\n      </TransitionContext.Provider>\n    </NestingContext.Provider>\n  )\n}\n\nTransition.Child = TransitionChild\n","// TODO: This must already exist somewhere, right? 🤔\n// Ref: https://www.w3.org/TR/uievents-key/#named-key-attribute-values\nexport enum Keys {\n  Space = ' ',\n  Enter = 'Enter',\n  Escape = 'Escape',\n  Backspace = 'Backspace',\n\n  ArrowUp = 'ArrowUp',\n  ArrowDown = 'ArrowDown',\n\n  Home = 'Home',\n  End = 'End',\n\n  PageUp = 'PageUp',\n  PageDown = 'PageDown',\n\n  Tab = 'Tab',\n}\n","// WAI-ARIA: https://www.w3.org/TR/wai-aria-practices-1.2/#menubutton\nimport * as React from 'react'\n\nimport { Props } from '../../types'\nimport { match } from '../../utils/match'\nimport { forwardRefWithAs, render } from '../../utils/render'\nimport { disposables } from '../../utils/disposables'\nimport { useDisposables } from '../../hooks/use-disposables'\nimport { useIsoMorphicEffect } from '../../hooks/use-iso-morphic-effect'\nimport { useSyncRefs } from '../../hooks/use-sync-refs'\nimport { useId } from '../../hooks/use-id'\nimport { Keys } from '../keyboard'\n\nenum MenuStates {\n  Open,\n  Closed,\n}\n\ntype MenuItemDataRef = React.MutableRefObject<{ textValue?: string; disabled: boolean }>\n\ntype StateDefinition = {\n  menuState: MenuStates\n  buttonRef: React.MutableRefObject<HTMLButtonElement | null>\n  itemsRef: React.MutableRefObject<HTMLDivElement | null>\n  items: { id: string; dataRef: MenuItemDataRef }[]\n  searchQuery: string\n  activeItemIndex: number | null\n}\n\nenum ActionTypes {\n  OpenMenu,\n  CloseMenu,\n\n  GoToItem,\n  Search,\n  ClearSearch,\n\n  RegisterItem,\n  UnregisterItem,\n}\n\nenum Focus {\n  FirstItem,\n  PreviousItem,\n  NextItem,\n  LastItem,\n  SpecificItem,\n  Nothing,\n}\n\nfunction calculateActiveItemIndex(\n  state: StateDefinition,\n  focus: Focus,\n  id?: string\n): StateDefinition['activeItemIndex'] {\n  if (state.items.length <= 0) return null\n\n  const items = state.items\n  const activeItemIndex = state.activeItemIndex ?? -1\n\n  const nextActiveIndex = match(focus, {\n    [Focus.FirstItem]: () => items.findIndex(item => !item.dataRef.current.disabled),\n    [Focus.PreviousItem]: () => {\n      const idx = items\n        .slice()\n        .reverse()\n        .findIndex((item, idx, all) => {\n          if (activeItemIndex !== -1 && all.length - idx - 1 >= activeItemIndex) return false\n          return !item.dataRef.current.disabled\n        })\n      if (idx === -1) return idx\n      return items.length - 1 - idx\n    },\n    [Focus.NextItem]: () => {\n      return items.findIndex((item, idx) => {\n        if (idx <= activeItemIndex) return false\n        return !item.dataRef.current.disabled\n      })\n    },\n    [Focus.LastItem]: () => {\n      const idx = items\n        .slice()\n        .reverse()\n        .findIndex(item => !item.dataRef.current.disabled)\n      if (idx === -1) return idx\n      return items.length - 1 - idx\n    },\n    [Focus.SpecificItem]: () => items.findIndex(item => item.id === id),\n    [Focus.Nothing]: () => null,\n  })\n\n  if (nextActiveIndex === -1) return state.activeItemIndex\n  return nextActiveIndex\n}\n\ntype Actions =\n  | { type: ActionTypes.CloseMenu }\n  | { type: ActionTypes.OpenMenu }\n  | { type: ActionTypes.GoToItem; focus: Focus; id?: string }\n  | { type: ActionTypes.Search; value: string }\n  | { type: ActionTypes.ClearSearch }\n  | { type: ActionTypes.RegisterItem; id: string; dataRef: MenuItemDataRef }\n  | { type: ActionTypes.UnregisterItem; id: string }\n\nconst reducers: {\n  [P in ActionTypes]: (\n    state: StateDefinition,\n    action: Extract<Actions, { type: P }>\n  ) => StateDefinition\n} = {\n  [ActionTypes.CloseMenu]: state => ({ ...state, menuState: MenuStates.Closed }),\n  [ActionTypes.OpenMenu]: state => ({ ...state, menuState: MenuStates.Open }),\n  [ActionTypes.GoToItem]: (state, action) => {\n    const activeItemIndex = calculateActiveItemIndex(state, action.focus, action.id)\n\n    if (state.searchQuery === '' && state.activeItemIndex === activeItemIndex) {\n      return state\n    }\n\n    return {\n      ...state,\n      searchQuery: '',\n      activeItemIndex,\n    }\n  },\n  [ActionTypes.Search]: (state, action) => {\n    const searchQuery = state.searchQuery + action.value\n    const match = state.items.findIndex(\n      item =>\n        item.dataRef.current.textValue?.startsWith(searchQuery) && !item.dataRef.current.disabled\n    )\n\n    if (match === -1 || match === state.activeItemIndex) {\n      return { ...state, searchQuery }\n    }\n\n    return {\n      ...state,\n      searchQuery,\n      activeItemIndex: match,\n    }\n  },\n  [ActionTypes.ClearSearch]: state => ({ ...state, searchQuery: '' }),\n  [ActionTypes.RegisterItem]: (state, action) => ({\n    ...state,\n    items: [...state.items, { id: action.id, dataRef: action.dataRef }],\n  }),\n  [ActionTypes.UnregisterItem]: (state, action) => {\n    const nextItems = state.items.slice()\n    const currentActiveItem =\n      state.activeItemIndex !== null ? nextItems[state.activeItemIndex] : null\n\n    const idx = nextItems.findIndex(a => a.id === action.id)\n\n    if (idx !== -1) nextItems.splice(idx, 1)\n\n    return {\n      ...state,\n      items: nextItems,\n      activeItemIndex: (() => {\n        if (idx === state.activeItemIndex) return null\n        if (currentActiveItem === null) return null\n\n        // If we removed the item before the actual active index, then it would be out of sync. To\n        // fix this, we will find the correct (new) index position.\n        return nextItems.indexOf(currentActiveItem)\n      })(),\n    }\n  },\n}\n\nconst MenuContext = React.createContext<[StateDefinition, React.Dispatch<Actions>] | null>(null)\n\nfunction useMenuContext(component: string) {\n  const context = React.useContext(MenuContext)\n  if (context === null) {\n    const err = new Error(`<${component} /> is missing a parent <${Menu.name} /> component.`)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(err, useMenuContext)\n    }\n    throw err\n  }\n  return context\n}\n\nfunction stateReducer(state: StateDefinition, action: Actions) {\n  return match(action.type, reducers, state, action)\n}\n\n// ---\n\nconst DEFAULT_MENU_TAG = React.Fragment\n\ntype MenuRenderPropArg = { open: boolean }\n\nexport function Menu<TTag extends React.ElementType = typeof DEFAULT_MENU_TAG>(\n  props: Props<TTag, MenuRenderPropArg>\n) {\n  const d = useDisposables()\n  const reducerBag = React.useReducer(stateReducer, {\n    menuState: MenuStates.Closed,\n    buttonRef: React.createRef(),\n    itemsRef: React.createRef(),\n    items: [],\n    searchQuery: '',\n    activeItemIndex: null,\n  } as StateDefinition)\n  const [{ menuState, itemsRef, buttonRef }, dispatch] = reducerBag\n\n  React.useEffect(() => {\n    function handler(event: MouseEvent) {\n      if (menuState !== MenuStates.Open) return\n      if (buttonRef.current?.contains(event.target as HTMLElement)) return\n\n      if (!itemsRef.current?.contains(event.target as HTMLElement)) {\n        dispatch({ type: ActionTypes.CloseMenu })\n      }\n      if (!event.defaultPrevented) d.nextFrame(() => buttonRef.current?.focus())\n    }\n\n    window.addEventListener('click', handler)\n    return () => window.removeEventListener('click', handler)\n  }, [menuState, itemsRef, buttonRef, d, dispatch])\n\n  const propsBag = React.useMemo(() => ({ open: menuState === MenuStates.Open }), [menuState])\n\n  return (\n    <MenuContext.Provider value={reducerBag}>\n      {render(props, propsBag, DEFAULT_MENU_TAG)}\n    </MenuContext.Provider>\n  )\n}\n\n// ---\n\ntype ButtonPropsWeControl =\n  | 'ref'\n  | 'id'\n  | 'type'\n  | 'aria-haspopup'\n  | 'aria-controls'\n  | 'aria-expanded'\n  | 'onKeyDown'\n  | 'onFocus'\n  | 'onBlur'\n  | 'onPointerUp'\n\nconst DEFAULT_BUTTON_TAG = 'button'\n\ntype ButtonRenderPropArg = { open: boolean; focused: boolean }\n\nconst Button = forwardRefWithAs(function Button<\n  TTag extends React.ElementType = typeof DEFAULT_BUTTON_TAG\n>(\n  props: Props<TTag, ButtonRenderPropArg, ButtonPropsWeControl>,\n  ref: React.Ref<HTMLButtonElement>\n) {\n  const [state, dispatch] = useMenuContext([Menu.name, Button.name].join('.'))\n  const buttonRef = useSyncRefs(state.buttonRef, ref)\n  const [focused, setFocused] = React.useState(false)\n\n  const id = `headlessui-menu-button-${useId()}`\n  const d = useDisposables()\n\n  const handleKeyDown = React.useCallback(\n    (event: React.KeyboardEvent<HTMLButtonElement>) => {\n      switch (event.key) {\n        // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-13\n\n        case Keys.Space:\n        case Keys.Enter:\n        case Keys.ArrowDown:\n          event.preventDefault()\n          dispatch({ type: ActionTypes.OpenMenu })\n          d.nextFrame(() => {\n            state.itemsRef.current?.focus()\n            dispatch({ type: ActionTypes.GoToItem, focus: Focus.FirstItem })\n          })\n          break\n\n        case Keys.ArrowUp:\n          event.preventDefault()\n          dispatch({ type: ActionTypes.OpenMenu })\n          d.nextFrame(() => {\n            state.itemsRef.current?.focus()\n            dispatch({ type: ActionTypes.GoToItem, focus: Focus.LastItem })\n          })\n          break\n      }\n    },\n    [dispatch, state, d]\n  )\n\n  const handlePointerUp = React.useCallback(\n    (event: MouseEvent) => {\n      if (state.menuState === MenuStates.Open) {\n        dispatch({ type: ActionTypes.CloseMenu })\n        d.nextFrame(() => state.buttonRef.current?.focus())\n      } else {\n        event.preventDefault()\n        dispatch({ type: ActionTypes.OpenMenu })\n        d.nextFrame(() => state.itemsRef.current?.focus())\n      }\n    },\n    [dispatch, d, state]\n  )\n\n  const handleFocus = React.useCallback(() => {\n    if (state.menuState === MenuStates.Open) state.itemsRef.current?.focus()\n    setFocused(true)\n  }, [state, setFocused])\n\n  const handleBlur = React.useCallback(() => setFocused(false), [setFocused])\n\n  const propsBag = React.useMemo(() => ({ open: state.menuState === MenuStates.Open, focused }), [\n    state,\n    focused,\n  ])\n  const passthroughProps = props\n  const propsWeControl = {\n    ref: buttonRef,\n    id,\n    type: 'button',\n    'aria-haspopup': true,\n    'aria-controls': state.itemsRef.current?.id,\n    'aria-expanded': state.menuState === MenuStates.Open ? true : undefined,\n    onKeyDown: handleKeyDown,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onPointerUp: handlePointerUp,\n  }\n\n  return render({ ...passthroughProps, ...propsWeControl }, propsBag, DEFAULT_BUTTON_TAG)\n})\n\n// ---\n\ntype ItemsPropsWeControl =\n  | 'aria-activedescendant'\n  | 'aria-labelledby'\n  | 'id'\n  | 'onKeyDown'\n  | 'ref'\n  | 'role'\n  | 'tabIndex'\n\nconst DEFAULT_ITEMS_TAG = 'div'\n\ntype ItemsRenderPropArg = { open: boolean }\n\nconst Items = forwardRefWithAs(function Items<\n  TTag extends React.ElementType = typeof DEFAULT_ITEMS_TAG\n>(\n  props: Props<TTag, ItemsRenderPropArg, ItemsPropsWeControl> & { static?: boolean },\n  ref: React.Ref<HTMLDivElement>\n) {\n  const { static: isStatic = false, ...passthroughProps } = props\n  const [state, dispatch] = useMenuContext([Menu.name, Items.name].join('.'))\n  const itemsRef = useSyncRefs(state.itemsRef, ref)\n\n  const id = `headlessui-menu-items-${useId()}`\n  const searchDisposables = useDisposables()\n\n  const handleKeyDown = React.useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      searchDisposables.dispose()\n\n      switch (event.key) {\n        // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-12\n\n        // @ts-expect-error Fallthrough is expected here\n        case Keys.Space:\n          if (state.searchQuery !== '') {\n            event.preventDefault()\n            return dispatch({ type: ActionTypes.Search, value: event.key })\n          }\n        // When in type ahead mode, fallthrough\n        case Keys.Enter:\n          event.preventDefault()\n          dispatch({ type: ActionTypes.CloseMenu })\n          if (state.activeItemIndex !== null) {\n            const { id } = state.items[state.activeItemIndex]\n            document.getElementById(id)?.click()\n          }\n          disposables().nextFrame(() => state.buttonRef.current?.focus())\n          break\n\n        case Keys.ArrowDown:\n          event.preventDefault()\n          return dispatch({ type: ActionTypes.GoToItem, focus: Focus.NextItem })\n\n        case Keys.ArrowUp:\n          event.preventDefault()\n          return dispatch({ type: ActionTypes.GoToItem, focus: Focus.PreviousItem })\n\n        case Keys.Home:\n        case Keys.PageUp:\n          event.preventDefault()\n          return dispatch({ type: ActionTypes.GoToItem, focus: Focus.FirstItem })\n\n        case Keys.End:\n        case Keys.PageDown:\n          event.preventDefault()\n          return dispatch({ type: ActionTypes.GoToItem, focus: Focus.LastItem })\n\n        case Keys.Escape:\n          event.preventDefault()\n          dispatch({ type: ActionTypes.CloseMenu })\n          disposables().nextFrame(() => state.buttonRef.current?.focus())\n          break\n\n        case Keys.Tab:\n          return event.preventDefault()\n\n        default:\n          if (event.key.length === 1) {\n            dispatch({ type: ActionTypes.Search, value: event.key })\n            searchDisposables.setTimeout(() => dispatch({ type: ActionTypes.ClearSearch }), 350)\n          }\n          break\n      }\n    },\n    [dispatch, searchDisposables, state]\n  )\n\n  const propsBag = React.useMemo(() => ({ open: state.menuState === MenuStates.Open }), [state])\n  const propsWeControl = {\n    'aria-activedescendant':\n      state.activeItemIndex === null ? undefined : state.items[state.activeItemIndex]?.id,\n    'aria-labelledby': state.buttonRef.current?.id,\n    id,\n    onKeyDown: handleKeyDown,\n    role: 'menu',\n    tabIndex: 0,\n  }\n\n  if (!isStatic && state.menuState === MenuStates.Closed) return null\n\n  return render(\n    { ...passthroughProps, ...propsWeControl, ...{ ref: itemsRef } },\n    propsBag,\n    DEFAULT_ITEMS_TAG\n  )\n})\n\n// ---\n\ntype MenuItemPropsWeControl =\n  | 'id'\n  | 'role'\n  | 'tabIndex'\n  | 'aria-disabled'\n  | 'onPointerLeave'\n  | 'onFocus'\n\nconst DEFAULT_ITEM_TAG = React.Fragment\n\ntype ItemRenderPropArg = { active: boolean; disabled: boolean }\n\nfunction Item<TTag extends React.ElementType = typeof DEFAULT_ITEM_TAG>(\n  props: Props<TTag, ItemRenderPropArg, MenuItemPropsWeControl | 'className'> & {\n    disabled?: boolean\n    onClick?: (event: { preventDefault: Function }) => void\n\n    // Special treatment, can either be a string or a function that resolves to a string\n    className?: ((bag: ItemRenderPropArg) => string) | string\n  }\n) {\n  const { disabled = false, className, onClick, ...passthroughProps } = props\n  const [state, dispatch] = useMenuContext([Menu.name, Item.name].join('.'))\n  const d = useDisposables()\n  const id = `headlessui-menu-item-${useId()}`\n  const active =\n    state.activeItemIndex !== null ? state.items[state.activeItemIndex].id === id : false\n\n  const bag = React.useRef<MenuItemDataRef['current']>({ disabled })\n\n  useIsoMorphicEffect(() => {\n    bag.current.disabled = disabled\n  }, [bag, disabled])\n\n  useIsoMorphicEffect(() => {\n    bag.current.textValue = document.getElementById(id)?.textContent?.toLowerCase()\n  }, [bag, id])\n\n  useIsoMorphicEffect(() => {\n    dispatch({ type: ActionTypes.RegisterItem, id, dataRef: bag })\n    return () => dispatch({ type: ActionTypes.UnregisterItem, id })\n  }, [bag, id])\n\n  const handleClick = React.useCallback(\n    (event: { preventDefault: Function }) => {\n      if (disabled) return event.preventDefault()\n      dispatch({ type: ActionTypes.CloseMenu })\n      d.nextFrame(() => state.buttonRef.current?.focus())\n      if (onClick) return onClick(event)\n    },\n    [d, dispatch, state.buttonRef, disabled, onClick]\n  )\n\n  const handleFocus = React.useCallback(() => {\n    if (disabled) return dispatch({ type: ActionTypes.GoToItem, focus: Focus.Nothing })\n    dispatch({ type: ActionTypes.GoToItem, focus: Focus.SpecificItem, id })\n  }, [disabled, id, dispatch])\n\n  const handlePointerMove = React.useCallback(() => {\n    if (disabled) return\n    if (active) return\n    dispatch({ type: ActionTypes.GoToItem, focus: Focus.SpecificItem, id })\n  }, [disabled, active, id, dispatch])\n\n  const handlePointerLeave = React.useCallback(() => {\n    if (disabled) return\n    if (!active) return\n    dispatch({ type: ActionTypes.GoToItem, focus: Focus.Nothing })\n  }, [disabled, active, dispatch])\n\n  const propsBag = React.useMemo(() => ({ active, disabled }), [active, disabled])\n  const propsWeControl = {\n    id,\n    role: 'menuitem',\n    tabIndex: -1,\n    className: resolvePropValue(className, propsBag),\n    'aria-disabled': disabled === true ? true : undefined,\n    onClick: handleClick,\n    onFocus: handleFocus,\n    onPointerMove: handlePointerMove,\n    onPointerLeave: handlePointerLeave,\n  }\n\n  return render<TTag, ItemRenderPropArg>(\n    { ...passthroughProps, ...propsWeControl },\n    propsBag,\n    DEFAULT_ITEM_TAG\n  )\n}\n\nfunction resolvePropValue<TProperty, TBag>(property: TProperty, bag: TBag) {\n  if (property === undefined) return undefined\n  if (typeof property === 'function') return property(bag)\n  return property\n}\n\n// ---\n\nMenu.Button = Button\nMenu.Items = Items\nMenu.Item = Item\n","import * as React from 'react'\n\nexport function useIsMounted() {\n  const mounted = React.useRef(true)\n\n  React.useEffect(() => {\n    return () => {\n      mounted.current = false\n    }\n  }, [])\n\n  return mounted\n}\n","import * as React from 'react'\nimport { Props } from '../types'\n\nexport function render<TTag extends React.ElementType, TBag>(\n  props: Props<TTag, TBag, any>,\n  bag: TBag,\n  tag: React.ElementType\n) {\n  const { as: Component = tag, children, ...passThroughProps } = props\n\n  const resolvedChildren = (typeof children === 'function' ? children(bag) : children) as\n    | React.ReactElement\n    | React.ReactElement[]\n\n  if (Component === React.Fragment) {\n    if (Object.keys(passThroughProps).length > 0) {\n      if (Array.isArray(resolvedChildren) && resolvedChildren.length > 1) {\n        const err = new Error('You should only render 1 child')\n        if (Error.captureStackTrace) Error.captureStackTrace(err, render)\n        throw err\n      }\n\n      if (!React.isValidElement(resolvedChildren)) {\n        const err = new Error(\n          `You should render an element as a child. Did you forget the as=\"...\" prop?`\n        )\n        if (Error.captureStackTrace) Error.captureStackTrace(err, render)\n        throw err\n      }\n\n      return React.cloneElement(\n        resolvedChildren,\n\n        // Filter out undefined values so that they don't override the existing values\n        mergeEventFunctions(compact(passThroughProps), resolvedChildren.props, ['onClick'])\n      )\n    }\n  }\n\n  return React.createElement(Component, passThroughProps, resolvedChildren)\n}\n\n/**\n * We can use this function for the following useCase:\n *\n * <Menu.Item> <button onClick={console.log} /> </Menu.Item>\n *\n * Our `Menu.Item` will have an internal `onClick`, if you passthrough an `onClick` to the actual\n * `Menu.Item` component we will call it correctly. However, when we have an `onClick` on the actual\n * first child, that one should _also_ be called (but before this implementation, it was just\n * overriding the `onClick`). But it is only when we *render* that we have access to the existing\n * props of this component.\n *\n * It's a bit hacky, and not that clean, but it is something internal and we have tests to rely on\n * so that we can refactor this later (if needed).\n */\nfunction mergeEventFunctions(\n  passThroughProps: Record<string, any>,\n  existingProps: Record<string, any>,\n  functionsToMerge: string[]\n) {\n  let clone = Object.assign({}, passThroughProps)\n  for (let func of functionsToMerge) {\n    if (passThroughProps[func] !== undefined && existingProps[func] !== undefined) {\n      Object.assign(clone, {\n        [func](event: { defaultPrevented: boolean }) {\n          // Props we control\n          if (!event.defaultPrevented) passThroughProps[func](event)\n\n          // Existing props on the component\n          if (!event.defaultPrevented) existingProps[func](event)\n        },\n      })\n    }\n  }\n\n  return clone\n}\n\n/**\n * This is a hack, but basically we want to keep the full 'API' of the component, but we do want to\n * wrap it in a forwardRef so that we _can_ passthrough the ref\n */\nexport function forwardRefWithAs<T>(component: T): T {\n  return React.forwardRef((component as unknown) as any) as any\n}\n\nfunction compact<T extends Record<any, any>>(object: T) {\n  let clone = Object.assign({}, object)\n  for (let key in clone) {\n    if (clone[key] === undefined) delete clone[key]\n  }\n  return clone\n}\n","import * as React from 'react'\n\nimport { disposables } from '../utils/disposables'\n\nexport function useDisposables() {\n  // Using useState instead of useRef so that we can use the initializer function.\n  const [d] = React.useState(disposables)\n  React.useEffect(() => () => d.dispose(), [d])\n  return d\n}\n","import * as React from 'react'\n\nexport function useSyncRefs<TType>(\n  ...refs: (React.MutableRefObject<TType> | ((instance: TType) => void) | null)[]\n) {\n  return React.useCallback(\n    (value: TType) => {\n      refs.forEach(ref => {\n        if (ref === null) return\n        if (typeof ref === 'function') return ref(value)\n        ref.current = value\n      })\n    },\n    [refs]\n  )\n}\n","import * as React from 'react'\n\nimport { useDisposables } from '../../hooks/use-disposables'\nimport { useId } from '../../hooks/use-id'\nimport { useIsoMorphicEffect } from '../../hooks/use-iso-morphic-effect'\nimport { useComputed } from '../../hooks/use-computed'\nimport { useSyncRefs } from '../../hooks/use-sync-refs'\nimport { Props } from '../../types'\nimport { forwardRefWithAs, render } from '../../utils/render'\nimport { match } from '../../utils/match'\nimport { disposables } from '../../utils/disposables'\nimport { Keys } from '../keyboard'\n\nenum ListboxStates {\n  Open,\n  Closed,\n}\n\ntype ListboxOptionDataRef = React.MutableRefObject<{\n  textValue?: string\n  disabled: boolean\n  value: unknown\n}>\n\ntype StateDefinition = {\n  listboxState: ListboxStates\n  propsRef: React.MutableRefObject<{ value: unknown; onChange(value: unknown): void }>\n  labelRef: React.MutableRefObject<HTMLLabelElement | null>\n  buttonRef: React.MutableRefObject<HTMLButtonElement | null>\n  optionsRef: React.MutableRefObject<HTMLUListElement | null>\n  options: { id: string; dataRef: ListboxOptionDataRef }[]\n  searchQuery: string\n  activeOptionIndex: number | null\n}\n\nenum ActionTypes {\n  OpenListbox,\n  CloseListbox,\n\n  GoToOption,\n  Search,\n  ClearSearch,\n\n  RegisterOption,\n  UnregisterOption,\n}\n\nenum Focus {\n  First,\n  Previous,\n  Next,\n  Last,\n  Specific,\n  Nothing,\n}\n\nfunction calculateActiveOptionIndex(\n  state: StateDefinition,\n  focus: Focus,\n  id?: string\n): StateDefinition['activeOptionIndex'] {\n  if (state.options.length <= 0) return null\n\n  const options = state.options\n  const activeOptionIndex = state.activeOptionIndex ?? -1\n\n  const nextActiveIndex = match(focus, {\n    [Focus.First]: () => options.findIndex(option => !option.dataRef.current.disabled),\n    [Focus.Previous]: () => {\n      const idx = options\n        .slice()\n        .reverse()\n        .findIndex((option, idx, all) => {\n          if (activeOptionIndex !== -1 && all.length - idx - 1 >= activeOptionIndex) return false\n          return !option.dataRef.current.disabled\n        })\n      if (idx === -1) return idx\n      return options.length - 1 - idx\n    },\n    [Focus.Next]: () => {\n      return options.findIndex((option, idx) => {\n        if (idx <= activeOptionIndex) return false\n        return !option.dataRef.current.disabled\n      })\n    },\n    [Focus.Last]: () => {\n      const idx = options\n        .slice()\n        .reverse()\n        .findIndex(option => !option.dataRef.current.disabled)\n      if (idx === -1) return idx\n      return options.length - 1 - idx\n    },\n    [Focus.Specific]: () => options.findIndex(option => option.id === id),\n    [Focus.Nothing]: () => null,\n  })\n\n  if (nextActiveIndex === -1) return state.activeOptionIndex\n  return nextActiveIndex\n}\n\ntype Actions =\n  | { type: ActionTypes.CloseListbox }\n  | { type: ActionTypes.OpenListbox }\n  | { type: ActionTypes.GoToOption; focus: Focus; id?: string }\n  | { type: ActionTypes.Search; value: string }\n  | { type: ActionTypes.ClearSearch }\n  | { type: ActionTypes.RegisterOption; id: string; dataRef: ListboxOptionDataRef }\n  | { type: ActionTypes.UnregisterOption; id: string }\n\nconst reducers: {\n  [P in ActionTypes]: (\n    state: StateDefinition,\n    action: Extract<Actions, { type: P }>\n  ) => StateDefinition\n} = {\n  [ActionTypes.CloseListbox]: state => ({ ...state, listboxState: ListboxStates.Closed }),\n  [ActionTypes.OpenListbox]: state => ({ ...state, listboxState: ListboxStates.Open }),\n  [ActionTypes.GoToOption]: (state, action) => {\n    const activeOptionIndex = calculateActiveOptionIndex(state, action.focus, action.id)\n\n    if (state.searchQuery === '' && state.activeOptionIndex === activeOptionIndex) {\n      return state\n    }\n\n    return { ...state, searchQuery: '', activeOptionIndex }\n  },\n  [ActionTypes.Search]: (state, action) => {\n    const searchQuery = state.searchQuery + action.value\n    const match = state.options.findIndex(\n      option =>\n        !option.dataRef.current.disabled &&\n        option.dataRef.current.textValue?.startsWith(searchQuery)\n    )\n\n    if (match === -1 || match === state.activeOptionIndex) {\n      return { ...state, searchQuery }\n    }\n\n    return { ...state, searchQuery, activeOptionIndex: match }\n  },\n  [ActionTypes.ClearSearch]: state => ({ ...state, searchQuery: '' }),\n  [ActionTypes.RegisterOption]: (state, action) => ({\n    ...state,\n    options: [...state.options, { id: action.id, dataRef: action.dataRef }],\n  }),\n  [ActionTypes.UnregisterOption]: (state, action) => {\n    const nextOptions = state.options.slice()\n    const currentActiveOption =\n      state.activeOptionIndex !== null ? nextOptions[state.activeOptionIndex] : null\n\n    const idx = nextOptions.findIndex(a => a.id === action.id)\n\n    if (idx !== -1) nextOptions.splice(idx, 1)\n\n    return {\n      ...state,\n      options: nextOptions,\n      activeOptionIndex: (() => {\n        if (idx === state.activeOptionIndex) return null\n        if (currentActiveOption === null) return null\n\n        // If we removed the option before the actual active index, then it would be out of sync. To\n        // fix this, we will find the correct (new) index position.\n        return nextOptions.indexOf(currentActiveOption)\n      })(),\n    }\n  },\n}\n\nconst ListboxContext = React.createContext<[StateDefinition, React.Dispatch<Actions>] | null>(null)\n\nfunction stateReducer(state: StateDefinition, action: Actions) {\n  return match(action.type, reducers, state, action)\n}\n\nfunction useListboxContext(component: string) {\n  const context = React.useContext(ListboxContext)\n  if (context === null) {\n    const err = new Error(`<${component} /> is missing a parent <${Listbox.name} /> component.`)\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useListboxContext)\n    throw err\n  }\n  return context\n}\n\n// ---\n\nconst DEFAULT_LISTBOX_TAG = React.Fragment\n\ntype ListboxRenderPropArg = { open: boolean }\n\nexport function Listbox<\n  TTag extends React.ElementType = typeof DEFAULT_LISTBOX_TAG,\n  TType = string\n>(props: Props<TTag, ListboxRenderPropArg> & { value: TType; onChange(value: TType): void }) {\n  const { value, onChange, ...passThroughProps } = props\n  const d = useDisposables()\n  const reducerBag = React.useReducer(stateReducer, {\n    listboxState: ListboxStates.Closed,\n    propsRef: { current: { value, onChange } },\n    labelRef: React.createRef(),\n    buttonRef: React.createRef(),\n    optionsRef: React.createRef(),\n    options: [],\n    searchQuery: '',\n    activeOptionIndex: null,\n  } as StateDefinition)\n  const [{ listboxState, propsRef, optionsRef, buttonRef }, dispatch] = reducerBag\n\n  useIsoMorphicEffect(() => {\n    propsRef.current.value = value\n  }, [value, propsRef])\n  useIsoMorphicEffect(() => {\n    propsRef.current.onChange = onChange\n  }, [onChange, propsRef])\n\n  React.useEffect(() => {\n    function handler(event: MouseEvent) {\n      if (listboxState !== ListboxStates.Open) return\n      if (buttonRef.current?.contains(event.target as HTMLElement)) return\n\n      if (!optionsRef.current?.contains(event.target as HTMLElement)) {\n        dispatch({ type: ActionTypes.CloseListbox })\n      }\n      if (!event.defaultPrevented) d.nextFrame(() => buttonRef.current?.focus())\n    }\n\n    window.addEventListener('click', handler)\n    return () => window.removeEventListener('click', handler)\n  }, [listboxState, optionsRef, buttonRef, d, dispatch])\n\n  const propsBag = React.useMemo<ListboxRenderPropArg>(\n    () => ({ open: listboxState === ListboxStates.Open }),\n    [listboxState]\n  )\n\n  return (\n    <ListboxContext.Provider value={reducerBag}>\n      {render(passThroughProps, propsBag, DEFAULT_LISTBOX_TAG)}\n    </ListboxContext.Provider>\n  )\n}\n\n// ---\n\ntype ButtonPropsWeControl =\n  | 'ref'\n  | 'id'\n  | 'type'\n  | 'aria-haspopup'\n  | 'aria-controls'\n  | 'aria-expanded'\n  | 'aria-labelledby'\n  | 'onKeyDown'\n  | 'onFocus'\n  | 'onBlur'\n  | 'onPointerUp'\n\nconst DEFAULT_BUTTON_TAG = 'button'\n\ntype ButtonRenderPropArg = { open: boolean; focused: boolean }\n\nconst Button = forwardRefWithAs(function Button<\n  TTag extends React.ElementType = typeof DEFAULT_BUTTON_TAG\n>(\n  props: Props<TTag, ButtonRenderPropArg, ButtonPropsWeControl>,\n  ref: React.Ref<HTMLButtonElement>\n) {\n  const [state, dispatch] = useListboxContext([Listbox.name, Button.name].join('.'))\n  const buttonRef = useSyncRefs(state.buttonRef, ref)\n  const [focused, setFocused] = React.useState(false)\n\n  const id = `headlessui-listbox-button-${useId()}`\n  const d = useDisposables()\n\n  const handleKeyDown = React.useCallback(\n    (event: React.KeyboardEvent<HTMLButtonElement>) => {\n      switch (event.key) {\n        // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-13\n\n        case Keys.Space:\n        case Keys.Enter:\n        case Keys.ArrowDown:\n          event.preventDefault()\n          dispatch({ type: ActionTypes.OpenListbox })\n          d.nextFrame(() => {\n            state.optionsRef.current?.focus()\n            if (!state.propsRef.current.value)\n              dispatch({ type: ActionTypes.GoToOption, focus: Focus.First })\n          })\n          break\n\n        case Keys.ArrowUp:\n          event.preventDefault()\n          dispatch({ type: ActionTypes.OpenListbox })\n          d.nextFrame(() => {\n            state.optionsRef.current?.focus()\n            if (!state.propsRef.current.value)\n              dispatch({ type: ActionTypes.GoToOption, focus: Focus.Last })\n          })\n          break\n      }\n    },\n    [dispatch, state, d]\n  )\n\n  const handlePointerUp = React.useCallback(\n    (event: MouseEvent) => {\n      if (state.listboxState === ListboxStates.Open) {\n        dispatch({ type: ActionTypes.CloseListbox })\n        d.nextFrame(() => state.buttonRef.current?.focus())\n      } else {\n        event.preventDefault()\n        dispatch({ type: ActionTypes.OpenListbox })\n        d.nextFrame(() => state.optionsRef.current?.focus())\n      }\n    },\n    [dispatch, d, state]\n  )\n\n  const handleFocus = React.useCallback(() => {\n    if (state.listboxState === ListboxStates.Open) return state.optionsRef.current?.focus()\n    setFocused(true)\n  }, [state, setFocused])\n\n  const handleBlur = React.useCallback(() => setFocused(false), [setFocused])\n  const labelledby = useComputed(() => {\n    if (!state.labelRef.current) return undefined\n    return [state.labelRef.current.id, id].join(' ')\n  }, [state.labelRef.current, id])\n\n  const propsBag = React.useMemo<ButtonRenderPropArg>(\n    () => ({ open: state.listboxState === ListboxStates.Open, focused }),\n    [state, focused]\n  )\n  const passthroughProps = props\n  const propsWeControl = {\n    ref: buttonRef,\n    id,\n    type: 'button',\n    'aria-haspopup': true,\n    'aria-controls': state.optionsRef.current?.id,\n    'aria-expanded': state.listboxState === ListboxStates.Open ? true : undefined,\n    'aria-labelledby': labelledby,\n    onKeyDown: handleKeyDown,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onPointerUp: handlePointerUp,\n  }\n\n  return render({ ...passthroughProps, ...propsWeControl }, propsBag, DEFAULT_BUTTON_TAG)\n})\n\n// ---\n\ntype LabelPropsWeControl = 'id' | 'ref' | 'onPointerUp'\n\nconst DEFAULT_LABEL_TAG = 'label'\n\ntype LabelRenderPropArg = { open: boolean }\n\nfunction Label<TTag extends React.ElementType = typeof DEFAULT_LABEL_TAG>(\n  props: Props<TTag, LabelRenderPropArg, LabelPropsWeControl>\n) {\n  const [state] = useListboxContext([Listbox.name, Label.name].join('.'))\n  const id = `headlessui-listbox-label-${useId()}`\n\n  const handlePointerUp = React.useCallback(() => state.buttonRef.current?.focus(), [\n    state.buttonRef,\n  ])\n\n  const propsBag = React.useMemo<OptionsRenderPropArg>(\n    () => ({ open: state.listboxState === ListboxStates.Open }),\n    [state]\n  )\n  const propsWeControl = {\n    ref: state.labelRef,\n    id,\n    onPointerUp: handlePointerUp,\n  }\n  return render({ ...props, ...propsWeControl }, propsBag, DEFAULT_LABEL_TAG)\n}\n\n// ---\n\ntype OptionsPropsWeControl =\n  | 'aria-activedescendant'\n  | 'aria-labelledby'\n  | 'id'\n  | 'onKeyDown'\n  | 'ref'\n  | 'role'\n  | 'tabIndex'\n\nconst DEFAULT_OPTIONS_TAG = 'ul'\n\ntype OptionsRenderPropArg = { open: boolean }\n\ntype ListboxOptionsProp<TTag> = Props<TTag, OptionsRenderPropArg, OptionsPropsWeControl> & {\n  static?: boolean\n}\n\nconst Options = forwardRefWithAs(function Options<\n  TTag extends React.ElementType = typeof DEFAULT_OPTIONS_TAG\n>(props: ListboxOptionsProp<TTag>, ref: React.Ref<HTMLUListElement>) {\n  const {\n    enter,\n    enterFrom,\n    enterTo,\n    leave,\n    leaveFrom,\n    leaveTo,\n    static: isStatic = false,\n    ...passthroughProps\n  } = props\n  const [state, dispatch] = useListboxContext([Listbox.name, Options.name].join('.'))\n  const optionsRef = useSyncRefs(state.optionsRef, ref)\n\n  const id = `headlessui-listbox-options-${useId()}`\n  const d = useDisposables()\n  const searchDisposables = useDisposables()\n\n  const handleKeyDown = React.useCallback(\n    (event: React.KeyboardEvent<HTMLUListElement>) => {\n      searchDisposables.dispose()\n\n      switch (event.key) {\n        // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-12\n\n        // @ts-expect-error Fallthrough is expected here\n        case Keys.Space:\n          if (state.searchQuery !== '') {\n            event.preventDefault()\n            return dispatch({ type: ActionTypes.Search, value: event.key })\n          }\n        // When in type ahead mode, fallthrough\n        case Keys.Enter:\n          event.preventDefault()\n          dispatch({ type: ActionTypes.CloseListbox })\n          if (state.activeOptionIndex !== null) {\n            const { dataRef } = state.options[state.activeOptionIndex]\n            state.propsRef.current.onChange(dataRef.current.value)\n          }\n          disposables().nextFrame(() => state.buttonRef.current?.focus())\n          break\n\n        case Keys.ArrowDown:\n          event.preventDefault()\n          return dispatch({ type: ActionTypes.GoToOption, focus: Focus.Next })\n\n        case Keys.ArrowUp:\n          event.preventDefault()\n          return dispatch({ type: ActionTypes.GoToOption, focus: Focus.Previous })\n\n        case Keys.Home:\n        case Keys.PageUp:\n          event.preventDefault()\n          return dispatch({ type: ActionTypes.GoToOption, focus: Focus.First })\n\n        case Keys.End:\n        case Keys.PageDown:\n          event.preventDefault()\n          return dispatch({ type: ActionTypes.GoToOption, focus: Focus.Last })\n\n        case Keys.Escape:\n          event.preventDefault()\n          dispatch({ type: ActionTypes.CloseListbox })\n          return d.nextFrame(() => state.buttonRef.current?.focus())\n\n        case Keys.Tab:\n          return event.preventDefault()\n\n        default:\n          if (event.key.length === 1) {\n            dispatch({ type: ActionTypes.Search, value: event.key })\n            searchDisposables.setTimeout(() => dispatch({ type: ActionTypes.ClearSearch }), 350)\n          }\n          break\n      }\n    },\n    [d, dispatch, searchDisposables, state]\n  )\n\n  const labelledby = useComputed(() => state.labelRef.current?.id ?? state.buttonRef.current?.id, [\n    state.labelRef.current,\n    state.buttonRef.current,\n  ])\n\n  const propsBag = React.useMemo<OptionsRenderPropArg>(\n    () => ({ open: state.listboxState === ListboxStates.Open }),\n    [state]\n  )\n  const propsWeControl = {\n    'aria-activedescendant':\n      state.activeOptionIndex === null ? undefined : state.options[state.activeOptionIndex]?.id,\n    'aria-labelledby': labelledby,\n    id,\n    onKeyDown: handleKeyDown,\n    role: 'listbox',\n    tabIndex: 0,\n  }\n\n  if (!isStatic && state.listboxState === ListboxStates.Closed) return null\n\n  return render(\n    { ...passthroughProps, ...propsWeControl, ...{ ref: optionsRef } },\n    propsBag,\n    DEFAULT_OPTIONS_TAG\n  )\n})\n\n// ---\n\ntype ListboxOptionPropsWeControl =\n  | 'id'\n  | 'role'\n  | 'tabIndex'\n  | 'aria-disabled'\n  | 'aria-selected'\n  | 'onPointerLeave'\n  | 'onFocus'\n\nconst DEFAULT_OPTION_TAG = 'li'\n\ntype OptionRenderPropArg = { active: boolean; selected: boolean; disabled: boolean }\n\nfunction Option<TTag extends React.ElementType = typeof DEFAULT_OPTION_TAG, TType = string>(\n  props: Props<TTag, OptionRenderPropArg, ListboxOptionPropsWeControl | 'className'> & {\n    disabled?: boolean\n    value: TType\n\n    // Special treatment, can either be a string or a function that resolves to a string\n    className?: ((bag: OptionRenderPropArg) => string) | string\n  }\n) {\n  const { disabled = false, value, className, ...passthroughProps } = props\n  const [state, dispatch] = useListboxContext([Listbox.name, Option.name].join('.'))\n  const id = `headlessui-listbox-option-${useId()}`\n  const active =\n    state.activeOptionIndex !== null ? state.options[state.activeOptionIndex].id === id : false\n  const selected = state.propsRef.current.value === value\n\n  const bag = React.useRef<ListboxOptionDataRef['current']>({ disabled, value })\n\n  useIsoMorphicEffect(() => {\n    bag.current.disabled = disabled\n  }, [bag, disabled])\n  useIsoMorphicEffect(() => {\n    bag.current.value = value\n  }, [bag, value])\n  useIsoMorphicEffect(() => {\n    bag.current.textValue = document.getElementById(id)?.textContent?.toLowerCase()\n  }, [bag, id])\n\n  const select = React.useCallback(() => state.propsRef.current.onChange(value), [\n    state.propsRef,\n    value,\n  ])\n\n  useIsoMorphicEffect(() => {\n    dispatch({ type: ActionTypes.RegisterOption, id, dataRef: bag })\n    return () => dispatch({ type: ActionTypes.UnregisterOption, id })\n  }, [bag, id])\n\n  useIsoMorphicEffect(() => {\n    if (!selected) return\n    dispatch({ type: ActionTypes.GoToOption, focus: Focus.Specific, id })\n    document.getElementById(id)?.focus?.()\n  }, [])\n\n  useIsoMorphicEffect(() => {\n    if (!active) return\n    const d = disposables()\n    d.nextFrame(() => document.getElementById(id)?.scrollIntoView?.({ block: 'nearest' }))\n    return d.dispose\n  }, [active])\n\n  const handleClick = React.useCallback(\n    (event: { preventDefault: Function }) => {\n      if (disabled) return event.preventDefault()\n      select()\n      dispatch({ type: ActionTypes.CloseListbox })\n      disposables().nextFrame(() => state.buttonRef.current?.focus())\n    },\n    [dispatch, state.buttonRef, disabled, select]\n  )\n\n  const handleFocus = React.useCallback(() => {\n    if (disabled) return dispatch({ type: ActionTypes.GoToOption, focus: Focus.Nothing })\n    dispatch({ type: ActionTypes.GoToOption, focus: Focus.Specific, id })\n  }, [disabled, id, dispatch])\n\n  const handlePointerMove = React.useCallback(() => {\n    if (disabled) return\n    if (active) return\n    dispatch({ type: ActionTypes.GoToOption, focus: Focus.Specific, id })\n  }, [disabled, active, id, dispatch])\n\n  const handlePointerLeave = React.useCallback(() => {\n    if (disabled) return\n    if (!active) return\n    dispatch({ type: ActionTypes.GoToOption, focus: Focus.Nothing })\n  }, [disabled, active, dispatch])\n\n  const propsBag = React.useMemo(() => ({ active, selected, disabled }), [\n    active,\n    selected,\n    disabled,\n  ])\n  const propsWeControl = {\n    id,\n    role: 'option',\n    tabIndex: -1,\n    className: resolvePropValue(className, propsBag),\n    'aria-disabled': disabled === true ? true : undefined,\n    'aria-selected': selected === true ? true : undefined,\n    onClick: handleClick,\n    onFocus: handleFocus,\n    onPointerMove: handlePointerMove,\n    onPointerLeave: handlePointerLeave,\n  }\n\n  return render<TTag, OptionRenderPropArg>(\n    { ...passthroughProps, ...propsWeControl },\n    propsBag,\n    DEFAULT_OPTION_TAG\n  )\n}\n\nfunction resolvePropValue<TProperty, TBag>(property: TProperty, bag: TBag) {\n  if (property === undefined) return undefined\n  if (typeof property === 'function') return property(bag)\n  return property\n}\n\n// ---\n\nListbox.Button = Button\nListbox.Label = Label\nListbox.Options = Options\nListbox.Option = Option\n","import * as React from 'react'\nimport { useIsoMorphicEffect } from './use-iso-morphic-effect'\n\nexport function useComputed<T>(cb: () => T, dependencies: React.DependencyList) {\n  const [value, setValue] = React.useState(cb)\n  const cbRef = React.useRef(cb)\n  useIsoMorphicEffect(() => {\n    cbRef.current = cb\n  }, [cb])\n  useIsoMorphicEffect(() => setValue(cbRef.current), [cbRef, setValue, ...dependencies])\n  return value\n}\n","import * as React from 'react'\n\nimport { Props } from '../../types'\nimport { render } from '../../utils/render'\nimport { useId } from '../../hooks/use-id'\nimport { Keys } from '../keyboard'\n\ntype StateDefinition = {\n  switch: HTMLButtonElement | null\n  label: HTMLLabelElement | null\n\n  setSwitch(element: HTMLButtonElement): void\n  setLabel(element: HTMLLabelElement): void\n}\n\nconst GroupContext = React.createContext<StateDefinition | null>(null)\n\nfunction useGroupContext(component: string) {\n  const context = React.useContext(GroupContext)\n  if (context === null) {\n    const err = new Error(`<${component} /> is missing a parent <Switch.Group /> component.`)\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useGroupContext)\n    throw err\n  }\n  return context\n}\n\n// ---\n\nconst DEFAULT_GROUP_TAG = React.Fragment\n\nfunction Group<TTag extends React.ElementType = typeof DEFAULT_GROUP_TAG>(props: Props<TTag>) {\n  const [switchElement, setSwitchElement] = React.useState<HTMLButtonElement | null>(null)\n  const [labelElement, setLabelElement] = React.useState<HTMLLabelElement | null>(null)\n\n  const context = React.useMemo<StateDefinition>(\n    () => ({\n      switch: switchElement,\n      label: labelElement,\n      setSwitch: setSwitchElement,\n      setLabel: setLabelElement,\n    }),\n    [switchElement, setSwitchElement, labelElement, setLabelElement]\n  )\n  return (\n    <GroupContext.Provider value={context}>\n      {render(props, {}, DEFAULT_GROUP_TAG)}\n    </GroupContext.Provider>\n  )\n}\n\n// ---\n\nconst DEFAULT_SWITCH_TAG = 'button'\n\ntype SwitchRenderPropArg = { checked: boolean }\n\ntype SwitchPropsWeControl = 'id' | 'role' | 'tabIndex' | 'aria-checked' | 'onClick' | 'onKeyUp'\n\nexport function Switch<TTag extends React.ElementType = typeof DEFAULT_SWITCH_TAG>(\n  props: Props<\n    TTag,\n    SwitchRenderPropArg,\n    SwitchPropsWeControl | 'checked' | 'onChange' | 'className'\n  > & {\n    checked: boolean\n    onChange(checked: boolean): void\n\n    // Special treatment, can either be a string or a function that resolves to a string\n    className?: ((bag: SwitchRenderPropArg) => string) | string\n  }\n) {\n  const { checked, onChange, className, ...passThroughProps } = props\n  const id = `headlessui-switch-${useId()}`\n  const groupContext = React.useContext(GroupContext)\n\n  const toggle = React.useCallback(() => onChange(!checked), [onChange, checked])\n  const handleClick = React.useCallback(\n    (event: React.MouseEvent) => {\n      event.preventDefault()\n      toggle()\n    },\n    [toggle]\n  )\n  const handleKeyUp = React.useCallback(\n    (event: React.KeyboardEvent<HTMLElement>) => {\n      if (event.key === Keys.Space) {\n        event.preventDefault()\n        toggle()\n      }\n    },\n    [toggle]\n  )\n\n  const propsBag = React.useMemo<SwitchRenderPropArg>(() => ({ checked }), [checked])\n  const propsWeControl = {\n    id,\n    ref: groupContext === null ? undefined : groupContext.setSwitch,\n    role: 'switch',\n    tabIndex: 0,\n    className: resolvePropValue(className, propsBag),\n    'aria-checked': checked,\n    'aria-labelledby': groupContext?.label?.id,\n    onClick: handleClick,\n    onKeyUp: handleKeyUp,\n  }\n\n  return render({ ...passThroughProps, ...propsWeControl }, propsBag, DEFAULT_SWITCH_TAG)\n}\n\n// ---\n\ntype LabelPropsWeControl = 'id' | 'ref' | 'onPointerUp'\n\nconst DEFAULT_LABEL_TAG = 'label'\n\ntype LabelRenderPropArg = {}\n\nfunction Label<TTag extends React.ElementType = typeof DEFAULT_LABEL_TAG>(\n  props: Props<TTag, LabelRenderPropArg, LabelPropsWeControl>\n) {\n  const state = useGroupContext([Switch.name, Label.name].join('.'))\n  const id = `headlessui-switch-label-${useId()}`\n\n  const handlePointerUp = React.useCallback(() => {\n    if (!state.switch) return\n    state.switch.click()\n    state.switch.focus()\n  }, [state.switch])\n\n  const propsWeControl = {\n    ref: state.setLabel,\n    id,\n    onPointerUp: handlePointerUp,\n  }\n  return render({ ...props, ...propsWeControl }, {}, DEFAULT_LABEL_TAG)\n}\n\n// ---\n\nSwitch.Group = Group\nSwitch.Label = Label\n\n// ---\n\nfunction resolvePropValue<TProperty, TBag>(property: TProperty, bag: TBag) {\n  if (property === undefined) return undefined\n  if (typeof property === 'function') return property(bag)\n  return property\n}\n"],"names":["Reason","useIsoMorphicEffect","window","React","state","serverHandoffComplete","id","generateId","useId","setId","undefined","useIsInitialRender","initial","current","match","value","lookup","returnValue","args","error","Error","Object","keys","map","key","join","captureStackTrace","disposables","api","requestAnimationFrame","raf","add","cancelAnimationFrame","nextFrame","setTimeout","timer","clearTimeout","cb","push","dispose","splice","forEach","addClasses","node","classes","length","classList","removeClasses","remove","transition","base","from","to","done","d","_done","called","once","getComputedStyle","transitionDuration","transitionDelay","split","filter","Boolean","v","includes","parseFloat","sort","a","z","durationMs","Finished","Cancelled","waitForTransition","reason","useSplitClasses","className","trim","TreeStates","TransitionContext","Keys","MenuStates","ActionTypes","Focus","NestingContext","useNesting","doneRef","transitionableChildren","mounted","useIsMounted","unregister","childId","idx","indexOf","register","children","TransitionChild","props","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","rest","container","Visible","setState","context","useTransitionContext","show","appear","useParentNesting","isTransitioning","nesting","Hidden","enterClasses","enterFromClasses","enterToClasses","leaveClasses","leaveFromClasses","leaveToClasses","skip","Provider","as","Component","passthroughProps","ref","Transition","nestingBag","transitionBag","render","bag","tag","passThroughProps","resolvedChildren","Array","isArray","err","existingProps","functionsToMerge","clone","assign","func","event","defaultPrevented","mergeEventFunctions","object","compact","forwardRefWithAs","component","useDisposables","useSyncRefs","refs","Child","reducers","CloseMenu","menuState","Closed","OpenMenu","Open","GoToItem","action","activeItemIndex","focus","items","nextActiveIndex","FirstItem","findIndex","item","dataRef","disabled","PreviousItem","slice","reverse","all","NextItem","LastItem","SpecificItem","Nothing","calculateActiveItemIndex","searchQuery","Search","textValue","startsWith","ClearSearch","RegisterItem","UnregisterItem","nextItems","currentActiveItem","MenuContext","useMenuContext","Menu","name","stateReducer","type","DEFAULT_MENU_TAG","reducerBag","buttonRef","itemsRef","dispatch","handler","_buttonRef$current","contains","target","_itemsRef$current","_buttonRef$current2","addEventListener","removeEventListener","propsBag","open","ListboxStates","Button","focused","setFocused","handleKeyDown","Space","Enter","ArrowDown","preventDefault","ArrowUp","handlePointerUp","_state$buttonRef$curr","_state$itemsRef$curre3","handleFocus","handleBlur","_state$itemsRef$curre5","onKeyDown","onFocus","onBlur","onPointerUp","Items","isStatic","searchDisposables","document","getElementById","click","_state$buttonRef$curr2","Home","PageUp","End","PageDown","Escape","_state$buttonRef$curr3","Tab","propsWeControl","_state$items$state$ac","_state$buttonRef$curr4","role","tabIndex","DEFAULT_ITEM_TAG","resolvePropValue","property","useComputed","dependencies","setValue","cbRef","Item","onClick","active","_document$getElementB2","textContent","_document$getElementB3","toLowerCase","handleClick","_state$buttonRef$curr5","handlePointerMove","handlePointerLeave","onPointerMove","onPointerLeave","CloseListbox","listboxState","OpenListbox","GoToOption","activeOptionIndex","options","First","option","Previous","Next","Last","Specific","calculateActiveOptionIndex","_option$dataRef$curre","RegisterOption","UnregisterOption","nextOptions","currentActiveOption","ListboxContext","useListboxContext","Listbox","DEFAULT_LISTBOX_TAG","onChange","propsRef","labelRef","optionsRef","_optionsRef$current","_state$optionsRef$cur3","_state$optionsRef$cur4","labelledby","_state$optionsRef$cur5","Options","_state$labelRef$curre2","_state$options$state$","Label","Option","selected","_document$getElementB","select","_document$getElementB5","scrollIntoView","_document$getElementB6","block","_state$buttonRef$curr6","GroupContext","useGroupContext","DEFAULT_GROUP_TAG","Switch","checked","groupContext","toggle","handleKeyUp","setSwitch","label","_groupContext$label","onKeyUp","Group","switchElement","setSwitchElement","labelElement","setLabelElement","setLabel"],"mappings":"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"}